<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Solucionador y graficador de ecuaciones</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
    h1 { font-size: 1.5rem; margin-bottom: 10px; }
    label { display: block; margin-top: 10px; }
    input, select, button { padding: 6px; font-size: 1rem; margin-top: 4px; }
    #resultados { margin-top: 20px; background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 0 6px #ccc; }
    canvas { max-width: 100%; background: #fff; border: 1px solid #ddd; border-radius: 8px; margin-top: 25px; }
  </style>
</head>
<body>

  <h1>Solucionador y graficador de ecuaciones lineales y cuadráticas</h1>

  <label>Tipo de ecuación:
    <select id="tipo">
      <option value="lineal">Lineal (ax + b = 0)</option>
      <option value="cuadratica">Cuadrática (ax² + bx + c = 0)</option>
    </select>
  </label>

  <label>a: <input type="number" id="a" value="1" step="any" /></label>
  <label>b: <input type="number" id="b" value="0" step="any" /></label>
  <label id="cLabel" style="display:none;">c: <input type="number" id="c" value="0" step="any" /></label>

  <button onclick="resolver()">Resolver y graficar</button>

  <div id="resultados"></div>

  <canvas id="grafico"></canvas>

<script>
  const tipoSelect = document.getElementById('tipo');
  const cLabel = document.getElementById('cLabel');
  let chart;

  tipoSelect.addEventListener('change', () => {
    cLabel.style.display = tipoSelect.value === 'cuadratica' ? 'block' : 'none';
  });

  function resolver() {
    const a = parseFloat(document.getElementById('a').value);
    const b = parseFloat(document.getElementById('b').value);
    const tipo = tipoSelect.value;
    let c = 0;
    const resultados = document.getElementById('resultados');

    if (a === 0) {
      alert('El coeficiente "a" no puede ser 0.');
      return;
    }

    let soluciones = '';
    let dominio = 'Dominio: (-∞, ∞)';
    let rango = '';

    if (tipo === 'lineal') {
      const x = -b / a;
      soluciones = `Solución única: x = ${x.toFixed(4)}`;
      rango = 'Rango: (-∞, ∞)';
    } else {
      c = parseFloat(document.getElementById('c').value);
      const discriminante = b*b - 4*a*c;
      if (discriminante > 0) {
        const x1 = (-b + Math.sqrt(discriminante)) / (2*a);
        const x2 = (-b - Math.sqrt(discriminante)) / (2*a);
        soluciones = `Dos soluciones reales: x₁ = ${x1.toFixed(4)}, x₂ = ${x2.toFixed(4)}`;
      } else if (discriminante === 0) {
        const x = -b/(2*a);
        soluciones = `Una solución real doble: x = ${x.toFixed(4)}`;
      } else {
        const real = (-b/(2*a)).toFixed(4);
        const imag = (Math.sqrt(-discriminante)/(2*a)).toFixed(4);
        soluciones = `Soluciones complejas: x = ${real} ± ${imag}i`;
      }

      // Vértice para rango
      const yVertice = (4*a*c - b*b)/(4*a);
      if (a > 0) {
        rango = `Rango: [${yVertice.toFixed(4)}, ∞)`;
      } else {
        rango = `Rango: (-∞, ${yVertice.toFixed(4)}]`;
      }
    }

    resultados.innerHTML = `
      <strong>${soluciones}</strong><br>
      ${dominio}<br>
      ${rango}
    `;

    // Datos para gráfica
    const xs = [];
    const ys = [];
    for (let x = -20; x <= 20; x += 0.2) {
      let y;
      if (tipo === 'lineal') {
        y = a*x + b;
      } else {
        y = a*x*x + b*x + c;
      }
      xs.push(x.toFixed(2));
      ys.push(y);
    }

    if (chart) chart.destroy();

    chart = new Chart(document.getElementById('grafico'), {
      type: 'line',
      data: {
        labels: xs,
        datasets: [{
          label: tipo === 'lineal' ? 'f(x) = ax + b' : 'f(x) = ax² + bx + c',
          data: ys,
          borderColor: 'blue',
          fill: false,
          tension: 0.1,
          pointRadius: 0
        }]
      },
      options: {
        responsive: true,
        scales: {
          x: { title: { display: true, text: 'x' } },
          y: { title: { display: true, text: 'f(x)' } }
        }
      }
    });
  }

  resolver(); // gráfica inicial
</script>

</body>
</html>
