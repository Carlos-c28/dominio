<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Solucionador de Desigualdades</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
  }
  label, select, input {
    margin: 0.5rem 0;
    display: block;
  }
  button {
    margin-top: 1rem;
  }
  #resultado {
    margin-top: 1rem;
    font-weight: bold;
  }
</style>
</head>
<body>
<h2>Solucionador de Desigualdades Lineales y Cuadráticas</h2>

<form id="formDesigualdad">
  <label for="tipo">Tipo de desigualdad:</label>
  <select id="tipo" name="tipo">
    <option value="lineal">Lineal (ax + b &lt; 0)</option>
    <option value="cuadratica">Cuadrática (ax² + bx + c &lt; 0)</option>
  </select>

  <div id="coefLineal">
    <label for="aLineal">Coeficiente a (x):</label>
    <input type="number" id="aLineal" name="aLineal" step="any" required />

    <label for="bLineal">Coeficiente b (constante):</label>
    <input type="number" id="bLineal" name="bLineal" step="any" required />
  </div>

  <div id="coefCuadratica" style="display:none;">
    <label for="aCuad">Coeficiente a (x²):</label>
    <input type="number" id="aCuad" name="aCuad" step="any" />

    <label for="bCuad">Coeficiente b (x):</label>
    <input type="number" id="bCuad" name="bCuad" step="any" />

    <label for="cCuad">Coeficiente c (constante):</label>
    <input type="number" id="cCuad" name="cCuad" step="any" />
  </div>

  <label for="desigualdad">Tipo de desigualdad:</label>
  <select id="desigualdad" name="desigualdad">
    <option value="<">&lt;</option>
    <option value="<=">&le;</option>
    <option value=">">&gt;</option>
    <option value=">=">&ge;</option>
  </select>

  <button type="submit">Resolver</button>
</form>

<div id="resultado"></div>

<script>
  const tipoSelect = document.getElementById("tipo");
  const coefLineal = document.getElementById("coefLineal");
  const coefCuadratica = document.getElementById("coefCuadratica");
  const form = document.getElementById("formDesigualdad");
  const resultado = document.getElementById("resultado");

  // Mostrar/ocultar campos según el tipo seleccionado
  tipoSelect.addEventListener("change", () => {
    if (tipoSelect.value === "lineal") {
      coefLineal.style.display = "block";
      coefCuadratica.style.display = "none";
      // Hacer que inputs de cuadrática no sean requeridos
      document.getElementById("aCuad").required = false;
      document.getElementById("bCuad").required = false;
      document.getElementById("cCuad").required = false;
      // Inputs lineales sí requeridos
      document.getElementById("aLineal").required = true;
      document.getElementById("bLineal").required = true;
    } else {
      coefLineal.style.display = "none";
      coefCuadratica.style.display = "block";
      // Hacer que inputs lineales no sean requeridos
      document.getElementById("aLineal").required = false;
      document.getElementById("bLineal").required = false;
      // Inputs cuadráticos sí requeridos
      document.getElementById("aCuad").required = true;
      document.getElementById("bCuad").required = true;
      document.getElementById("cCuad").required = true;
    }
  });

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    resultado.textContent = "";
    const tipo = tipoSelect.value;
    const desigualdad = document.getElementById("desigualdad").value;

    if (tipo === "lineal") {
      const a = parseFloat(document.getElementById("aLineal").value);
      const b = parseFloat(document.getElementById("bLineal").value);
      if (a === 0) {
        resultado.textContent = "El coeficiente 'a' no puede ser 0 en una desigualdad lineal.";
        return;
      }
      resolverLineal(a, b, desigualdad);
    } else {
      const a = parseFloat(document.getElementById("aCuad").value);
      const b = parseFloat(document.getElementById("bCuad").value);
      const c = parseFloat(document.getElementById("cCuad").value);
      if (a === 0) {
        resultado.textContent = "El coeficiente 'a' no puede ser 0 en una desigualdad cuadrática.";
        return;
      }
      resolverCuadratica(a, b, c, desigualdad);
    }
  });

  function resolverLineal(a, b, signo) {
    // Desigualdad: ax + b < 0 (o <=, >, >=)
    // Solución: x < -b/a (o similar dependiendo del signo)
    let xSol = -b / a;
    let sentido = signo;

    // Si a < 0, invertir sentido
    if (a < 0) {
      if (signo === "<") sentido = ">";
      else if (signo === "<=") sentido = ">=";
      else if (signo === ">") sentido = "<";
      else if (signo === ">=") sentido = "<=";
    }

    let texto = `Solución: x ${sentido} ${xSol.toFixed(3)}`;
    resultado.textContent = texto;
  }

  function resolverCuadratica(a, b, c, signo) {
    // Desigualdad: ax² + bx + c < 0 (o <=, >, >=)
    // Calculamos discriminante
    const d = b * b - 4 * a * c;
    let texto = "";

    if (d < 0) {
      // No tiene raíces reales
      if ((a > 0 && (signo === "<" || signo === "<=")) || (a < 0 && (signo === ">" || signo === ">="))) {
        texto = "No hay solución real.";
      } else {
        texto = "La desigualdad es verdadera para todo x.";
      }
    } else if (d === 0) {
      // Una raíz
      const r = -b / (2 * a);
      if (signo === "<") {
        texto = a > 0 ? `x ≠ ${r.toFixed(3)}` : `x = ${r.toFixed(3)}`;
      } else if (signo === "<=") {
        texto = a > 0 ? `x = ${r.toFixed(3)}` : `x ∈ R`;
      } else if (signo === ">") {
        texto = a < 0 ? `x ≠ ${r.toFixed(3)}` : `x = ${r.toFixed(3)}`;
      } else if (signo === ">=") {
        texto = a < 0 ? `x = ${r.toFixed(3)}` : `x ∈ R`;
      }
    } else {
      // Dos raíces
      const r1 = (-b - Math.sqrt(d)) / (2 * a);
      const r2 = (-b + Math.sqrt(d)) / (2 * a);
      const raiz1 = Math.min(r1, r2);
      const raiz2 = Math.max(r1, r2);

      if (signo === "<") {
        if (a > 0) texto = `x ∈ (${raiz1.toFixed(3)}, ${raiz2.toFixed(3)})`;
        else texto = `x ∈ (-∞, ${raiz1.toFixed(3)}) ∪ (${raiz2.toFixed(3)}, ∞)`;
      } else if (signo === "<=") {
        if (a > 0) texto = `x ∈ [${raiz1.toFixed(3)}, ${raiz2.toFixed(3)}]`;
        else texto = `x ∈ (-∞, ${raiz1.toFixed(3)}] ∪ [${raiz2.toFixed(3)}, ∞)`;
      } else if (signo === ">") {
        if (a > 0) texto = `x ∈ (-∞, ${raiz1.toFixed(3)}) ∪ (${raiz2.toFixed(3)}, ∞)`;
        else texto = `x ∈ (${raiz1.toFixed(3)}, ${raiz2.toFixed(3)})`;
      } else if (signo === ">=") {
        if (a > 0) texto = `x ∈ (-∞, ${raiz1.toFixed(3)}] ∪ [${raiz2.toFixed(3)}, ∞)`;
        else texto = `x ∈ [${raiz1.toFixed(3)}, ${raiz2.toFixed(3)}]`;
      }
    }

    resultado.textContent = "Solución: " + texto;
  }
</script>
</body>
</html>
